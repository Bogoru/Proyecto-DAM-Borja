/*! For license information please see 572.3982d628.chunk.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkionic_app_base=globalThis.webpackChunkionic_app_base||[]).push([[572],{572:(t,e,r)=>{r.r(e),r.d(e,{createSwipeBackGesture:()=>S});var s=r(811),i=r(507);class l{constructor(t,e,r,s,i){this.id=e,this.name=r,this.disableScroll=i,this.priority=1e6*s+e,this.ctrl=t}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class n{constructor(t,e,r,s){this.id=e,this.disable=r,this.disableScroll=s,this.ctrl=t}block(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.disableGesture(t,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.enableGesture(t,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const a="backdrop-no-scroll",o=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(t){var e;return new l(this,this.newID(),t.name,null!==(e=t.priority)&&void 0!==e?e:0,!!t.disableScroll)}createBlocker(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n(this,this.newID(),t.disable,!!t.disableScroll)}start(t,e,r){return this.canStart(t)?(this.requestedStart.set(e,r),!0):(this.requestedStart.delete(e),!1)}capture(t,e,r){if(!this.start(t,e,r))return!1;const s=this.requestedStart;let i=-1e4;if(s.forEach((t=>{i=Math.max(i,t)})),i===r){this.capturedId=e,s.clear();const r=new CustomEvent("ionGestureCaptured",{detail:{gestureName:t}});return document.dispatchEvent(r),!0}return s.delete(e),!1}release(t){this.requestedStart.delete(t),this.capturedId===t&&(this.capturedId=void 0)}disableGesture(t,e){let r=this.disabledGestures.get(t);void 0===r&&(r=new Set,this.disabledGestures.set(t,r)),r.add(e)}enableGesture(t,e){const r=this.disabledGestures.get(t);void 0!==r&&r.delete(e)}disableScroll(t){this.disabledScroll.add(t),1===this.disabledScroll.size&&document.body.classList.add(a)}enableScroll(t){this.disabledScroll.delete(t),0===this.disabledScroll.size&&document.body.classList.remove(a)}canStart(t){return void 0===this.capturedId&&!this.isDisabled(t)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(t){const e=this.disabledGestures.get(t);return!!(e&&e.size>0)}newID(){return this.gestureId++,this.gestureId}},c=(t,e,r,s)=>{const i=d(t)?{capture:!!s.capture,passive:!!s.passive}:!!s.capture;let l,n;return t.__zone_symbol__addEventListener?(l="__zone_symbol__addEventListener",n="__zone_symbol__removeEventListener"):(l="addEventListener",n="removeEventListener"),t[l](e,r,i),()=>{t[n](e,r,i)}},d=t=>{if(void 0===u)try{const e=Object.defineProperty({},"passive",{get:()=>{u=!0}});t.addEventListener("optsTest",(()=>{}),e)}catch(e){u=!1}return!!u};let u;const h=t=>t instanceof Document?t:t.ownerDocument,b=t=>{let e=!1,r=!1,s=!0,i=!1;const l=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t),n=l.canStart,a=l.onWillStart,d=l.onStart,u=l.onEnd,b=l.notCaptured,S=l.onMove,y=l.threshold,g=l.passive,f=l.blurOnStart,X={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},w=((t,e,r)=>{const s=r*(Math.PI/180),i="x"===t,l=Math.cos(s),n=e*e;let a=0,o=0,c=!1,d=0;return{start(t,e){a=t,o=e,d=0,c=!0},detect(t,e){if(!c)return!1;const r=t-a,s=e-o,u=r*r+s*s;if(u<n)return!1;const h=Math.sqrt(u),b=(i?r:s)/h;return d=b>l?1:b<-l?-1:0,c=!1,!0},isGesture:()=>0!==d,getDirection:()=>d}})(l.direction,l.threshold,l.maxAngle),Y=o.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll}),_=()=>{e&&(i=!1,S&&S(X))},G=()=>!!Y.capture()&&(e=!0,s=!1,X.startX=X.currentX,X.startY=X.currentY,X.startTime=X.currentTime,a?a(X).then(D):D(),!0),D=()=>{f&&(()=>{if("undefined"!==typeof document){const t=document.activeElement;(null===t||void 0===t?void 0:t.blur)&&t.blur()}})(),d&&d(X),s=!0},E=()=>{e=!1,r=!1,i=!1,s=!0,Y.release()},I=t=>{const r=e,i=s;E(),i&&(v(X,t),r?u&&u(X):b&&b(X))},T=((t,e,r,s,i)=>{let l,n,a,o,d,u,b,v=0;const p=s=>{v=Date.now()+2e3,e(s)&&(!n&&r&&(n=c(t,"touchmove",r,i)),a||(a=c(s.target,"touchend",S,i)),o||(o=c(s.target,"touchcancel",S,i)))},m=s=>{v>Date.now()||e(s)&&(!u&&r&&(u=c(h(t),"mousemove",r,i)),b||(b=c(h(t),"mouseup",y,i)))},S=t=>{g(),s&&s(t)},y=t=>{f(),s&&s(t)},g=()=>{n&&n(),a&&a(),o&&o(),n=a=o=void 0},f=()=>{u&&u(),b&&b(),u=b=void 0},X=()=>{g(),f()},w=function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(l&&l(),d&&d(),l=d=void 0,X()):(l||(l=c(t,"touchstart",p,i)),d||(d=c(t,"mousedown",m,i)))};return{enable:w,stop:X,destroy:()=>{w(!1),s=r=e=void 0}}})(l.el,(t=>{const e=m(t);return!(r||!s)&&(p(t,X),X.startX=X.currentX,X.startY=X.currentY,X.startTime=X.currentTime=e,X.velocityX=X.velocityY=X.deltaX=X.deltaY=0,X.event=t,(!n||!1!==n(X))&&(Y.release(),!!Y.start()&&(r=!0,0===y?G():(w.start(X.startX,X.startY),!0))))}),(t=>{e?!i&&s&&(i=!0,v(X,t),requestAnimationFrame(_)):(v(X,t),w.detect(X.currentX,X.currentY)&&(w.isGesture()&&G()||k()))}),I,{capture:!1,passive:g}),k=()=>{E(),T.stop(),b&&b(X)};return{enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t||(e&&I(void 0),E()),T.enable(t)},destroy(){Y.destroy(),T.destroy()}}},v=(t,e)=>{if(!e)return;const r=t.currentX,s=t.currentY,i=t.currentTime;p(e,t);const l=t.currentX,n=t.currentY,a=(t.currentTime=m(e))-i;if(a>0&&a<100){const e=(l-r)/a,i=(n-s)/a;t.velocityX=.7*e+.3*t.velocityX,t.velocityY=.7*i+.3*t.velocityY}t.deltaX=l-t.startX,t.deltaY=n-t.startY,t.event=e},p=(t,e)=>{let r=0,s=0;if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];r=t.clientX,s=t.clientY}else void 0!==t.pageX&&(r=t.pageX,s=t.pageY)}e.currentX=r,e.currentY=s},m=t=>t.timeStamp||Date.now(),S=(t,e,r,l,n)=>{const a=t.ownerDocument.defaultView;let o=(0,i.i)(t);const c=t=>o?-t.deltaX:t.deltaX;return b({el:t,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:r=>(o=(0,i.i)(t),(t=>{const{startX:e}=t;return o?e>=a.innerWidth-50:e<=50})(r)&&e()),onStart:r,onMove:t=>{const e=c(t)/a.innerWidth;l(e)},onEnd:t=>{const e=c(t),r=a.innerWidth,i=e/r,l=(t=>o?-t.velocityX:t.velocityX)(t),d=l>=0&&(l>.2||e>r/2),u=(d?1-i:i)*r;let h=0;if(u>5){const t=u/Math.abs(l);h=Math.min(t,540)}n(d,i<=0?.01:(0,s.m)(0,i,.9999),h)}})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLMEosSUFBSUYsRUFBSyxJQUMxQixDQUNBaEIsRUFBYWEsRUFBZ0JMLEdBQWEsRUFBSSxLQUFPVyxFQUFBQSxFQUFBQSxHQUFNLEVBQUdYLEVBQVcsT0FBU08sRUFBUSxHQVcxRiIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvZ2VzdHVyZS1jb250cm9sbGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW5kZXgyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvc3dpcGUtYmFjay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuY2xhc3MgR2VzdHVyZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmdlc3R1cmVJZCA9IDA7XG4gICAgdGhpcy5yZXF1ZXN0ZWRTdGFydCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmRpc2FibGVkR2VzdHVyZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5kaXNhYmxlZFNjcm9sbCA9IG5ldyBTZXQoKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIGdlc3R1cmUgZGVsZWdhdGUgYmFzZWQgb24gdGhlIEdlc3R1cmVDb25maWcgcGFzc2VkXG4gICAqL1xuICBjcmVhdGVHZXN0dXJlKGNvbmZpZykge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gbmV3IEdlc3R1cmVEZWxlZ2F0ZSh0aGlzLCB0aGlzLm5ld0lEKCksIGNvbmZpZy5uYW1lLCAoX2EgPSBjb25maWcucHJpb3JpdHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDAsICEhY29uZmlnLmRpc2FibGVTY3JvbGwpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgYmxvY2tlciB0aGF0IHdpbGwgYmxvY2sgYW55IG90aGVyIGdlc3R1cmUgZXZlbnRzIGZyb20gZmlyaW5nLiBTZXQgaW4gdGhlIGlvbi1nZXN0dXJlIGNvbXBvbmVudC5cbiAgICovXG4gIGNyZWF0ZUJsb2NrZXIob3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBCbG9ja2VyRGVsZWdhdGUodGhpcywgdGhpcy5uZXdJRCgpLCBvcHRzLmRpc2FibGUsICEhb3B0cy5kaXNhYmxlU2Nyb2xsKTtcbiAgfVxuICBzdGFydChnZXN0dXJlTmFtZSwgaWQsIHByaW9yaXR5KSB7XG4gICAgaWYgKCF0aGlzLmNhblN0YXJ0KGdlc3R1cmVOYW1lKSkge1xuICAgICAgdGhpcy5yZXF1ZXN0ZWRTdGFydC5kZWxldGUoaWQpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLnJlcXVlc3RlZFN0YXJ0LnNldChpZCwgcHJpb3JpdHkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNhcHR1cmUoZ2VzdHVyZU5hbWUsIGlkLCBwcmlvcml0eSkge1xuICAgIGlmICghdGhpcy5zdGFydChnZXN0dXJlTmFtZSwgaWQsIHByaW9yaXR5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0ZWRTdGFydCA9IHRoaXMucmVxdWVzdGVkU3RhcnQ7XG4gICAgbGV0IG1heFByaW9yaXR5ID0gLTEwMDAwO1xuICAgIHJlcXVlc3RlZFN0YXJ0LmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICBtYXhQcmlvcml0eSA9IE1hdGgubWF4KG1heFByaW9yaXR5LCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgaWYgKG1heFByaW9yaXR5ID09PSBwcmlvcml0eSkge1xuICAgICAgdGhpcy5jYXB0dXJlZElkID0gaWQ7XG4gICAgICByZXF1ZXN0ZWRTdGFydC5jbGVhcigpO1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2lvbkdlc3R1cmVDYXB0dXJlZCcsIHsgZGV0YWlsOiB7IGdlc3R1cmVOYW1lIH0gfSk7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXF1ZXN0ZWRTdGFydC5kZWxldGUoaWQpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZWxlYXNlKGlkKSB7XG4gICAgdGhpcy5yZXF1ZXN0ZWRTdGFydC5kZWxldGUoaWQpO1xuICAgIGlmICh0aGlzLmNhcHR1cmVkSWQgPT09IGlkKSB7XG4gICAgICB0aGlzLmNhcHR1cmVkSWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGRpc2FibGVHZXN0dXJlKGdlc3R1cmVOYW1lLCBpZCkge1xuICAgIGxldCBzZXQgPSB0aGlzLmRpc2FibGVkR2VzdHVyZXMuZ2V0KGdlc3R1cmVOYW1lKTtcbiAgICBpZiAoc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldCA9IG5ldyBTZXQoKTtcbiAgICAgIHRoaXMuZGlzYWJsZWRHZXN0dXJlcy5zZXQoZ2VzdHVyZU5hbWUsIHNldCk7XG4gICAgfVxuICAgIHNldC5hZGQoaWQpO1xuICB9XG4gIGVuYWJsZUdlc3R1cmUoZ2VzdHVyZU5hbWUsIGlkKSB7XG4gICAgY29uc3Qgc2V0ID0gdGhpcy5kaXNhYmxlZEdlc3R1cmVzLmdldChnZXN0dXJlTmFtZSk7XG4gICAgaWYgKHNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZXQuZGVsZXRlKGlkKTtcbiAgICB9XG4gIH1cbiAgZGlzYWJsZVNjcm9sbChpZCkge1xuICAgIHRoaXMuZGlzYWJsZWRTY3JvbGwuYWRkKGlkKTtcbiAgICBpZiAodGhpcy5kaXNhYmxlZFNjcm9sbC5zaXplID09PSAxKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoQkFDS0RST1BfTk9fU0NST0xMKTtcbiAgICB9XG4gIH1cbiAgZW5hYmxlU2Nyb2xsKGlkKSB7XG4gICAgdGhpcy5kaXNhYmxlZFNjcm9sbC5kZWxldGUoaWQpO1xuICAgIGlmICh0aGlzLmRpc2FibGVkU2Nyb2xsLnNpemUgPT09IDApIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShCQUNLRFJPUF9OT19TQ1JPTEwpO1xuICAgIH1cbiAgfVxuICBjYW5TdGFydChnZXN0dXJlTmFtZSkge1xuICAgIGlmICh0aGlzLmNhcHR1cmVkSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gYSBnZXN0dXJlIGFscmVhZHkgY2FwdHVyZWRcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNEaXNhYmxlZChnZXN0dXJlTmFtZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaXNDYXB0dXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYXB0dXJlZElkICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgaXNTY3JvbGxEaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNhYmxlZFNjcm9sbC5zaXplID4gMDtcbiAgfVxuICBpc0Rpc2FibGVkKGdlc3R1cmVOYW1lKSB7XG4gICAgY29uc3QgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkR2VzdHVyZXMuZ2V0KGdlc3R1cmVOYW1lKTtcbiAgICBpZiAoZGlzYWJsZWQgJiYgZGlzYWJsZWQuc2l6ZSA+IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbmV3SUQoKSB7XG4gICAgdGhpcy5nZXN0dXJlSWQrKztcbiAgICByZXR1cm4gdGhpcy5nZXN0dXJlSWQ7XG4gIH1cbn1cbmNsYXNzIEdlc3R1cmVEZWxlZ2F0ZSB7XG4gIGNvbnN0cnVjdG9yKGN0cmwsIGlkLCBuYW1lLCBwcmlvcml0eSwgZGlzYWJsZVNjcm9sbCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGlzYWJsZVNjcm9sbCA9IGRpc2FibGVTY3JvbGw7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5ICogMTAwMDAwMCArIGlkO1xuICAgIHRoaXMuY3RybCA9IGN0cmw7XG4gIH1cbiAgY2FuU3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLmN0cmwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3RybC5jYW5TdGFydCh0aGlzLm5hbWUpO1xuICB9XG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5jdHJsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmN0cmwuc3RhcnQodGhpcy5uYW1lLCB0aGlzLmlkLCB0aGlzLnByaW9yaXR5KTtcbiAgfVxuICBjYXB0dXJlKCkge1xuICAgIGlmICghdGhpcy5jdHJsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGNhcHR1cmVkID0gdGhpcy5jdHJsLmNhcHR1cmUodGhpcy5uYW1lLCB0aGlzLmlkLCB0aGlzLnByaW9yaXR5KTtcbiAgICBpZiAoY2FwdHVyZWQgJiYgdGhpcy5kaXNhYmxlU2Nyb2xsKSB7XG4gICAgICB0aGlzLmN0cmwuZGlzYWJsZVNjcm9sbCh0aGlzLmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhcHR1cmVkO1xuICB9XG4gIHJlbGVhc2UoKSB7XG4gICAgaWYgKHRoaXMuY3RybCkge1xuICAgICAgdGhpcy5jdHJsLnJlbGVhc2UodGhpcy5pZCk7XG4gICAgICBpZiAodGhpcy5kaXNhYmxlU2Nyb2xsKSB7XG4gICAgICAgIHRoaXMuY3RybC5lbmFibGVTY3JvbGwodGhpcy5pZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5yZWxlYXNlKCk7XG4gICAgdGhpcy5jdHJsID0gdW5kZWZpbmVkO1xuICB9XG59XG5jbGFzcyBCbG9ja2VyRGVsZWdhdGUge1xuICBjb25zdHJ1Y3RvcihjdHJsLCBpZCwgZGlzYWJsZSwgZGlzYWJsZVNjcm9sbCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmRpc2FibGUgPSBkaXNhYmxlO1xuICAgIHRoaXMuZGlzYWJsZVNjcm9sbCA9IGRpc2FibGVTY3JvbGw7XG4gICAgdGhpcy5jdHJsID0gY3RybDtcbiAgfVxuICBibG9jaygpIHtcbiAgICBpZiAoIXRoaXMuY3RybCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5kaXNhYmxlKSB7XG4gICAgICBmb3IgKGNvbnN0IGdlc3R1cmUgb2YgdGhpcy5kaXNhYmxlKSB7XG4gICAgICAgIHRoaXMuY3RybC5kaXNhYmxlR2VzdHVyZShnZXN0dXJlLCB0aGlzLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZVNjcm9sbCkge1xuICAgICAgdGhpcy5jdHJsLmRpc2FibGVTY3JvbGwodGhpcy5pZCk7XG4gICAgfVxuICB9XG4gIHVuYmxvY2soKSB7XG4gICAgaWYgKCF0aGlzLmN0cmwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZSkge1xuICAgICAgZm9yIChjb25zdCBnZXN0dXJlIG9mIHRoaXMuZGlzYWJsZSkge1xuICAgICAgICB0aGlzLmN0cmwuZW5hYmxlR2VzdHVyZShnZXN0dXJlLCB0aGlzLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZVNjcm9sbCkge1xuICAgICAgdGhpcy5jdHJsLmVuYWJsZVNjcm9sbCh0aGlzLmlkKTtcbiAgICB9XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVuYmxvY2soKTtcbiAgICB0aGlzLmN0cmwgPSB1bmRlZmluZWQ7XG4gIH1cbn1cbmNvbnN0IEJBQ0tEUk9QX05PX1NDUk9MTCA9ICdiYWNrZHJvcC1uby1zY3JvbGwnO1xuY29uc3QgR0VTVFVSRV9DT05UUk9MTEVSID0gbmV3IEdlc3R1cmVDb250cm9sbGVyKCk7XG5cbmV4cG9ydCB7IEdFU1RVUkVfQ09OVFJPTExFUiBhcyBHIH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgRyBhcyBHRVNUVVJFX0NPTlRST0xMRVIgfSBmcm9tICcuL2dlc3R1cmUtY29udHJvbGxlci5qcyc7XG5leHBvcnQgeyBHIGFzIEdFU1RVUkVfQ09OVFJPTExFUiB9IGZyb20gJy4vZ2VzdHVyZS1jb250cm9sbGVyLmpzJztcblxuY29uc3QgYWRkRXZlbnRMaXN0ZW5lciA9IChlbCwgLy8gVE9ETyhGVy0yODMyKTogdHlwZVxuZXZlbnROYW1lLCBjYWxsYmFjaywgb3B0cykgPT4ge1xuICAvLyB1c2UgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyB3aGVuIHN1cHBvcnRlZFxuICAvLyBvdGhlcndpc2UgaXQncyBqdXN0IGEgYm9vbGVhbiBmb3IgdGhlIFwiY2FwdHVyZVwiIGFyZ1xuICBjb25zdCBsaXN0ZW5lck9wdHMgPSBzdXBwb3J0c1Bhc3NpdmUoZWwpXG4gICAgPyB7XG4gICAgICBjYXB0dXJlOiAhIW9wdHMuY2FwdHVyZSxcbiAgICAgIHBhc3NpdmU6ICEhb3B0cy5wYXNzaXZlLFxuICAgIH1cbiAgICA6ICEhb3B0cy5jYXB0dXJlO1xuICBsZXQgYWRkO1xuICBsZXQgcmVtb3ZlO1xuICBpZiAoZWxbJ19fem9uZV9zeW1ib2xfX2FkZEV2ZW50TGlzdGVuZXInXSkge1xuICAgIGFkZCA9ICdfX3pvbmVfc3ltYm9sX19hZGRFdmVudExpc3RlbmVyJztcbiAgICByZW1vdmUgPSAnX196b25lX3N5bWJvbF9fcmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG4gIH1cbiAgZWxzZSB7XG4gICAgYWRkID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xuICAgIHJlbW92ZSA9ICdyZW1vdmVFdmVudExpc3RlbmVyJztcbiAgfVxuICBlbFthZGRdKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGxpc3RlbmVyT3B0cyk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgZWxbcmVtb3ZlXShldmVudE5hbWUsIGNhbGxiYWNrLCBsaXN0ZW5lck9wdHMpO1xuICB9O1xufTtcbmNvbnN0IHN1cHBvcnRzUGFzc2l2ZSA9IChub2RlKSA9PiB7XG4gIGlmIChfc1Bhc3NpdmUgPT09IHVuZGVmaW5lZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgX3NQYXNzaXZlID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdvcHRzVGVzdCcsICgpID0+IHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSwgb3B0cyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICBfc1Bhc3NpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICEhX3NQYXNzaXZlO1xufTtcbmxldCBfc1Bhc3NpdmU7XG5cbmNvbnN0IE1PVVNFX1dBSVQgPSAyMDAwO1xuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbmNvbnN0IGNyZWF0ZVBvaW50ZXJFdmVudHMgPSAoZWwsIHBvaW50ZXJEb3duLCBwb2ludGVyTW92ZSwgcG9pbnRlclVwLCBvcHRpb25zKSA9PiB7XG4gIGxldCBybVRvdWNoU3RhcnQ7XG4gIGxldCBybVRvdWNoTW92ZTtcbiAgbGV0IHJtVG91Y2hFbmQ7XG4gIGxldCBybVRvdWNoQ2FuY2VsO1xuICBsZXQgcm1Nb3VzZVN0YXJ0O1xuICBsZXQgcm1Nb3VzZU1vdmU7XG4gIGxldCBybU1vdXNlVXA7XG4gIGxldCBsYXN0VG91Y2hFdmVudCA9IDA7XG4gIGNvbnN0IGhhbmRsZVRvdWNoU3RhcnQgPSAoZXYpID0+IHtcbiAgICBsYXN0VG91Y2hFdmVudCA9IERhdGUubm93KCkgKyBNT1VTRV9XQUlUO1xuICAgIGlmICghcG9pbnRlckRvd24oZXYpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcm1Ub3VjaE1vdmUgJiYgcG9pbnRlck1vdmUpIHtcbiAgICAgIHJtVG91Y2hNb3ZlID0gYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ3RvdWNobW92ZScsIHBvaW50ZXJNb3ZlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZlbnRzIGFyZSBkaXNwYXRjaGVkIG9uIHRoZSBlbGVtZW50IHRoYXQgaXMgdGFwcGVkIGFuZCBidWJibGUgdXAgdG9cbiAgICAgKiB0aGUgcmVmZXJlbmNlIGVsZW1lbnQgaW4gdGhlIGdlc3R1cmUuIEluIHRoZSBldmVudCB0aGF0IHRoZSBlbGVtZW50IHRoaXNcbiAgICAgKiBldmVudCB3YXMgZmlyc3QgZGlzcGF0Y2hlZCBvbiBpcyByZW1vdmVkIGZyb20gdGhlIERPTSwgdGhlIGV2ZW50IHdpbGwgbm9cbiAgICAgKiBsb25nZXIgYnViYmxlIHVwIHRvIG91ciByZWZlcmVuY2UgZWxlbWVudC4gVGhpcyBsZWF2ZXMgdGhlIGdlc3R1cmUgaW4gYW5cbiAgICAgKiB1bnVzYWJsZSBzdGF0ZS4gVG8gYWNjb3VudCBmb3IgdGhpcywgdGhlIHRvdWNoZW5kIGFuZCB0b3VjaGNhbmNlbCBsaXN0ZW5lcnNcbiAgICAgKiBzaG91bGQgYmUgYWRkZWQgdG8gdGhlIGV2ZW50IHRhcmdldCBzbyB0aGF0IHRoZXkgc3RpbGwgZmlyZSBldmVuIGlmIHRoZSB0YXJnZXRcbiAgICAgKiBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICAgKi9cbiAgICBpZiAoIXJtVG91Y2hFbmQpIHtcbiAgICAgIHJtVG91Y2hFbmQgPSBhZGRFdmVudExpc3RlbmVyKGV2LnRhcmdldCwgJ3RvdWNoZW5kJywgaGFuZGxlVG91Y2hFbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoIXJtVG91Y2hDYW5jZWwpIHtcbiAgICAgIHJtVG91Y2hDYW5jZWwgPSBhZGRFdmVudExpc3RlbmVyKGV2LnRhcmdldCwgJ3RvdWNoY2FuY2VsJywgaGFuZGxlVG91Y2hFbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gKGV2KSA9PiB7XG4gICAgaWYgKGxhc3RUb3VjaEV2ZW50ID4gRGF0ZS5ub3coKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXBvaW50ZXJEb3duKGV2KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXJtTW91c2VNb3ZlICYmIHBvaW50ZXJNb3ZlKSB7XG4gICAgICBybU1vdXNlTW92ZSA9IGFkZEV2ZW50TGlzdGVuZXIoZ2V0RG9jdW1lbnQoZWwpLCAnbW91c2Vtb3ZlJywgcG9pbnRlck1vdmUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoIXJtTW91c2VVcCkge1xuICAgICAgcm1Nb3VzZVVwID0gYWRkRXZlbnRMaXN0ZW5lcihnZXREb2N1bWVudChlbCksICdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVUb3VjaEVuZCA9IChldikgPT4ge1xuICAgIHN0b3BUb3VjaCgpO1xuICAgIGlmIChwb2ludGVyVXApIHtcbiAgICAgIHBvaW50ZXJVcChldik7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKGV2KSA9PiB7XG4gICAgc3RvcE1vdXNlKCk7XG4gICAgaWYgKHBvaW50ZXJVcCkge1xuICAgICAgcG9pbnRlclVwKGV2KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHN0b3BUb3VjaCA9ICgpID0+IHtcbiAgICBpZiAocm1Ub3VjaE1vdmUpIHtcbiAgICAgIHJtVG91Y2hNb3ZlKCk7XG4gICAgfVxuICAgIGlmIChybVRvdWNoRW5kKSB7XG4gICAgICBybVRvdWNoRW5kKCk7XG4gICAgfVxuICAgIGlmIChybVRvdWNoQ2FuY2VsKSB7XG4gICAgICBybVRvdWNoQ2FuY2VsKCk7XG4gICAgfVxuICAgIHJtVG91Y2hNb3ZlID0gcm1Ub3VjaEVuZCA9IHJtVG91Y2hDYW5jZWwgPSB1bmRlZmluZWQ7XG4gIH07XG4gIGNvbnN0IHN0b3BNb3VzZSA9ICgpID0+IHtcbiAgICBpZiAocm1Nb3VzZU1vdmUpIHtcbiAgICAgIHJtTW91c2VNb3ZlKCk7XG4gICAgfVxuICAgIGlmIChybU1vdXNlVXApIHtcbiAgICAgIHJtTW91c2VVcCgpO1xuICAgIH1cbiAgICBybU1vdXNlTW92ZSA9IHJtTW91c2VVcCA9IHVuZGVmaW5lZDtcbiAgfTtcbiAgY29uc3Qgc3RvcCA9ICgpID0+IHtcbiAgICBzdG9wVG91Y2goKTtcbiAgICBzdG9wTW91c2UoKTtcbiAgfTtcbiAgY29uc3QgZW5hYmxlID0gKGlzRW5hYmxlZCA9IHRydWUpID0+IHtcbiAgICBpZiAoIWlzRW5hYmxlZCkge1xuICAgICAgaWYgKHJtVG91Y2hTdGFydCkge1xuICAgICAgICBybVRvdWNoU3RhcnQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChybU1vdXNlU3RhcnQpIHtcbiAgICAgICAgcm1Nb3VzZVN0YXJ0KCk7XG4gICAgICB9XG4gICAgICBybVRvdWNoU3RhcnQgPSBybU1vdXNlU3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgICBzdG9wKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKCFybVRvdWNoU3RhcnQpIHtcbiAgICAgICAgcm1Ub3VjaFN0YXJ0ID0gYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ3RvdWNoc3RhcnQnLCBoYW5kbGVUb3VjaFN0YXJ0LCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmICghcm1Nb3VzZVN0YXJ0KSB7XG4gICAgICAgIHJtTW91c2VTdGFydCA9IGFkZEV2ZW50TGlzdGVuZXIoZWwsICdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZURvd24sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgZGVzdHJveSA9ICgpID0+IHtcbiAgICBlbmFibGUoZmFsc2UpO1xuICAgIHBvaW50ZXJVcCA9IHBvaW50ZXJNb3ZlID0gcG9pbnRlckRvd24gPSB1bmRlZmluZWQ7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZW5hYmxlLFxuICAgIHN0b3AsXG4gICAgZGVzdHJveSxcbiAgfTtcbn07XG5jb25zdCBnZXREb2N1bWVudCA9IChub2RlKSA9PiB7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgRG9jdW1lbnQgPyBub2RlIDogbm9kZS5vd25lckRvY3VtZW50O1xufTtcblxuY29uc3QgY3JlYXRlUGFuUmVjb2duaXplciA9IChkaXJlY3Rpb24sIHRocmVzaCwgbWF4QW5nbGUpID0+IHtcbiAgY29uc3QgcmFkaWFucyA9IG1heEFuZ2xlICogKE1hdGguUEkgLyAxODApO1xuICBjb25zdCBpc0RpclggPSBkaXJlY3Rpb24gPT09ICd4JztcbiAgY29uc3QgbWF4Q29zaW5lID0gTWF0aC5jb3MocmFkaWFucyk7XG4gIGNvbnN0IHRocmVzaG9sZCA9IHRocmVzaCAqIHRocmVzaDtcbiAgbGV0IHN0YXJ0WCA9IDA7XG4gIGxldCBzdGFydFkgPSAwO1xuICBsZXQgZGlydHkgPSBmYWxzZTtcbiAgbGV0IGlzUGFuID0gMDtcbiAgcmV0dXJuIHtcbiAgICBzdGFydCh4LCB5KSB7XG4gICAgICBzdGFydFggPSB4O1xuICAgICAgc3RhcnRZID0geTtcbiAgICAgIGlzUGFuID0gMDtcbiAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICB9LFxuICAgIGRldGVjdCh4LCB5KSB7XG4gICAgICBpZiAoIWRpcnR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbHRhWCA9IHggLSBzdGFydFg7XG4gICAgICBjb25zdCBkZWx0YVkgPSB5IC0gc3RhcnRZO1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVk7XG4gICAgICBpZiAoZGlzdGFuY2UgPCB0aHJlc2hvbGQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgaHlwb3RlbnVzZSA9IE1hdGguc3FydChkaXN0YW5jZSk7XG4gICAgICBjb25zdCBjb3NpbmUgPSAoaXNEaXJYID8gZGVsdGFYIDogZGVsdGFZKSAvIGh5cG90ZW51c2U7XG4gICAgICBpZiAoY29zaW5lID4gbWF4Q29zaW5lKSB7XG4gICAgICAgIGlzUGFuID0gMTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGNvc2luZSA8IC1tYXhDb3NpbmUpIHtcbiAgICAgICAgaXNQYW4gPSAtMTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpc1BhbiA9IDA7XG4gICAgICB9XG4gICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBpc0dlc3R1cmUoKSB7XG4gICAgICByZXR1cm4gaXNQYW4gIT09IDA7XG4gICAgfSxcbiAgICBnZXREaXJlY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaXNQYW47XG4gICAgfSxcbiAgfTtcbn07XG5cbi8vIFRPRE8oRlctMjgzMik6IHR5cGVzXG5jb25zdCBjcmVhdGVHZXN0dXJlID0gKGNvbmZpZykgPT4ge1xuICBsZXQgaGFzQ2FwdHVyZWRQYW4gPSBmYWxzZTtcbiAgbGV0IGhhc1N0YXJ0ZWRQYW4gPSBmYWxzZTtcbiAgbGV0IGhhc0ZpcmVkU3RhcnQgPSB0cnVlO1xuICBsZXQgaXNNb3ZlUXVldWVkID0gZmFsc2U7XG4gIGNvbnN0IGZpbmFsQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7IGRpc2FibGVTY3JvbGw6IGZhbHNlLCBkaXJlY3Rpb246ICd4JywgZ2VzdHVyZVByaW9yaXR5OiAwLCBwYXNzaXZlOiB0cnVlLCBtYXhBbmdsZTogNDAsIHRocmVzaG9sZDogMTAgfSwgY29uZmlnKTtcbiAgY29uc3QgY2FuU3RhcnQgPSBmaW5hbENvbmZpZy5jYW5TdGFydDtcbiAgY29uc3Qgb25XaWxsU3RhcnQgPSBmaW5hbENvbmZpZy5vbldpbGxTdGFydDtcbiAgY29uc3Qgb25TdGFydCA9IGZpbmFsQ29uZmlnLm9uU3RhcnQ7XG4gIGNvbnN0IG9uRW5kID0gZmluYWxDb25maWcub25FbmQ7XG4gIGNvbnN0IG5vdENhcHR1cmVkID0gZmluYWxDb25maWcubm90Q2FwdHVyZWQ7XG4gIGNvbnN0IG9uTW92ZSA9IGZpbmFsQ29uZmlnLm9uTW92ZTtcbiAgY29uc3QgdGhyZXNob2xkID0gZmluYWxDb25maWcudGhyZXNob2xkO1xuICBjb25zdCBwYXNzaXZlID0gZmluYWxDb25maWcucGFzc2l2ZTtcbiAgY29uc3QgYmx1ck9uU3RhcnQgPSBmaW5hbENvbmZpZy5ibHVyT25TdGFydDtcbiAgY29uc3QgZGV0YWlsID0ge1xuICAgIHR5cGU6ICdwYW4nLFxuICAgIHN0YXJ0WDogMCxcbiAgICBzdGFydFk6IDAsXG4gICAgc3RhcnRUaW1lOiAwLFxuICAgIGN1cnJlbnRYOiAwLFxuICAgIGN1cnJlbnRZOiAwLFxuICAgIHZlbG9jaXR5WDogMCxcbiAgICB2ZWxvY2l0eVk6IDAsXG4gICAgZGVsdGFYOiAwLFxuICAgIGRlbHRhWTogMCxcbiAgICBjdXJyZW50VGltZTogMCxcbiAgICBldmVudDogdW5kZWZpbmVkLFxuICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgfTtcbiAgY29uc3QgcGFuID0gY3JlYXRlUGFuUmVjb2duaXplcihmaW5hbENvbmZpZy5kaXJlY3Rpb24sIGZpbmFsQ29uZmlnLnRocmVzaG9sZCwgZmluYWxDb25maWcubWF4QW5nbGUpO1xuICBjb25zdCBnZXN0dXJlID0gR0VTVFVSRV9DT05UUk9MTEVSLmNyZWF0ZUdlc3R1cmUoe1xuICAgIG5hbWU6IGNvbmZpZy5nZXN0dXJlTmFtZSxcbiAgICBwcmlvcml0eTogY29uZmlnLmdlc3R1cmVQcmlvcml0eSxcbiAgICBkaXNhYmxlU2Nyb2xsOiBjb25maWcuZGlzYWJsZVNjcm9sbCxcbiAgfSk7XG4gIGNvbnN0IHBvaW50ZXJEb3duID0gKGV2KSA9PiB7XG4gICAgY29uc3QgdGltZVN0YW1wID0gbm93KGV2KTtcbiAgICBpZiAoaGFzU3RhcnRlZFBhbiB8fCAhaGFzRmlyZWRTdGFydCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB1cGRhdGVEZXRhaWwoZXYsIGRldGFpbCk7XG4gICAgZGV0YWlsLnN0YXJ0WCA9IGRldGFpbC5jdXJyZW50WDtcbiAgICBkZXRhaWwuc3RhcnRZID0gZGV0YWlsLmN1cnJlbnRZO1xuICAgIGRldGFpbC5zdGFydFRpbWUgPSBkZXRhaWwuY3VycmVudFRpbWUgPSB0aW1lU3RhbXA7XG4gICAgZGV0YWlsLnZlbG9jaXR5WCA9IGRldGFpbC52ZWxvY2l0eVkgPSBkZXRhaWwuZGVsdGFYID0gZGV0YWlsLmRlbHRhWSA9IDA7XG4gICAgZGV0YWlsLmV2ZW50ID0gZXY7XG4gICAgLy8gQ2hlY2sgaWYgZ2VzdHVyZSBjYW4gc3RhcnRcbiAgICBpZiAoY2FuU3RhcnQgJiYgY2FuU3RhcnQoZGV0YWlsKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmVsZWFzZSBmYWxsYmFja1xuICAgIGdlc3R1cmUucmVsZWFzZSgpO1xuICAgIC8vIFN0YXJ0IGdlc3R1cmVcbiAgICBpZiAoIWdlc3R1cmUuc3RhcnQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNTdGFydGVkUGFuID0gdHJ1ZTtcbiAgICBpZiAodGhyZXNob2xkID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ5VG9DYXB0dXJlUGFuKCk7XG4gICAgfVxuICAgIHBhbi5zdGFydChkZXRhaWwuc3RhcnRYLCBkZXRhaWwuc3RhcnRZKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgcG9pbnRlck1vdmUgPSAoZXYpID0+IHtcbiAgICAvLyBmYXN0IHBhdGgsIGlmIGdlc3R1cmUgaXMgY3VycmVudGx5IGNhcHR1cmVkXG4gICAgLy8gZG8gbWluaW11bSBqb2IgdG8gZ2V0IHVzZXItbGFuZCBldmVuIGRpc3BhdGNoZWRcbiAgICBpZiAoaGFzQ2FwdHVyZWRQYW4pIHtcbiAgICAgIGlmICghaXNNb3ZlUXVldWVkICYmIGhhc0ZpcmVkU3RhcnQpIHtcbiAgICAgICAgaXNNb3ZlUXVldWVkID0gdHJ1ZTtcbiAgICAgICAgY2FsY0dlc3R1cmVEYXRhKGRldGFpbCwgZXYpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmlyZU9uTW92ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGdlc3R1cmUgaXMgY3VycmVudGx5IGJlaW5nIGRldGVjdGVkXG4gICAgY2FsY0dlc3R1cmVEYXRhKGRldGFpbCwgZXYpO1xuICAgIGlmIChwYW4uZGV0ZWN0KGRldGFpbC5jdXJyZW50WCwgZGV0YWlsLmN1cnJlbnRZKSkge1xuICAgICAgaWYgKCFwYW4uaXNHZXN0dXJlKCkgfHwgIXRyeVRvQ2FwdHVyZVBhbigpKSB7XG4gICAgICAgIGFib3J0R2VzdHVyZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgZmlyZU9uTW92ZSA9ICgpID0+IHtcbiAgICAvLyBTaW5jZSBmaXJlT25Nb3ZlIGlzIGNhbGxlZCBpbnNpZGUgYSBSQUYsIG9uRW5kKCkgbWlnaHQgYmUgY2FsbGVkLFxuICAgIC8vIHdlIG11c3QgZG91YmxlIGNoZWNrIGhhc0NhcHR1cmVkUGFuXG4gICAgaWYgKCFoYXNDYXB0dXJlZFBhbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpc01vdmVRdWV1ZWQgPSBmYWxzZTtcbiAgICBpZiAob25Nb3ZlKSB7XG4gICAgICBvbk1vdmUoZGV0YWlsKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHRyeVRvQ2FwdHVyZVBhbiA9ICgpID0+IHtcbiAgICBpZiAoIWdlc3R1cmUuY2FwdHVyZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhc0NhcHR1cmVkUGFuID0gdHJ1ZTtcbiAgICBoYXNGaXJlZFN0YXJ0ID0gZmFsc2U7XG4gICAgLy8gcmVzZXQgc3RhcnQgcG9zaXRpb24gc2luY2UgdGhlIHJlYWwgdXNlci1sYW5kIGV2ZW50IHN0YXJ0cyBoZXJlXG4gICAgLy8gSWYgdGhlIHBhbiBkZXRlY3RvciB0aHJlc2hvbGQgaXMgYmlnLCBub3QgcmVzZXR0aW5nIHRoZSBzdGFydCBwb3NpdGlvblxuICAgIC8vIHdpbGwgY2F1c2UgYSBqdW1wIGluIHRoZSBhbmltYXRpb24gZXF1YWwgdG8gdGhlIGRldGVjdG9yIHRocmVzaG9sZC5cbiAgICAvLyB0aGUgYXJyYXkgb2YgcG9zaXRpb25zIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBnZXN0dXJlIHZlbG9jaXR5IGRvZXMgbm90XG4gICAgLy8gbmVlZCB0byBiZSBjbGVhbmVkLCBtb3JlIHBvaW50cyBpbiB0aGUgcG9zaXRpb25zIGFycmF5IGFsd2F5cyByZXN1bHRzIGluIGFcbiAgICAvLyBtb3JlIGFjY3VyYXRlIHZhbHVlIG9mIHRoZSB2ZWxvY2l0eS5cbiAgICBkZXRhaWwuc3RhcnRYID0gZGV0YWlsLmN1cnJlbnRYO1xuICAgIGRldGFpbC5zdGFydFkgPSBkZXRhaWwuY3VycmVudFk7XG4gICAgZGV0YWlsLnN0YXJ0VGltZSA9IGRldGFpbC5jdXJyZW50VGltZTtcbiAgICBpZiAob25XaWxsU3RhcnQpIHtcbiAgICAgIG9uV2lsbFN0YXJ0KGRldGFpbCkudGhlbihmaXJlT25TdGFydCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZmlyZU9uU3RhcnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIGNvbnN0IGJsdXJBY3RpdmVFbGVtZW50ID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgIGlmIChhY3RpdmVFbGVtZW50ID09PSBudWxsIHx8IGFjdGl2ZUVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjdGl2ZUVsZW1lbnQuYmx1cikge1xuICAgICAgICBhY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGZpcmVPblN0YXJ0ID0gKCkgPT4ge1xuICAgIGlmIChibHVyT25TdGFydCkge1xuICAgICAgYmx1ckFjdGl2ZUVsZW1lbnQoKTtcbiAgICB9XG4gICAgaWYgKG9uU3RhcnQpIHtcbiAgICAgIG9uU3RhcnQoZGV0YWlsKTtcbiAgICB9XG4gICAgaGFzRmlyZWRTdGFydCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICAgIGhhc0NhcHR1cmVkUGFuID0gZmFsc2U7XG4gICAgaGFzU3RhcnRlZFBhbiA9IGZhbHNlO1xuICAgIGlzTW92ZVF1ZXVlZCA9IGZhbHNlO1xuICAgIGhhc0ZpcmVkU3RhcnQgPSB0cnVlO1xuICAgIGdlc3R1cmUucmVsZWFzZSgpO1xuICB9O1xuICAvLyBFTkQgKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBjb25zdCBwb2ludGVyVXAgPSAoZXYpID0+IHtcbiAgICBjb25zdCB0bXBIYXNDYXB0dXJlZCA9IGhhc0NhcHR1cmVkUGFuO1xuICAgIGNvbnN0IHRtcEhhc0ZpcmVkU3RhcnQgPSBoYXNGaXJlZFN0YXJ0O1xuICAgIHJlc2V0KCk7XG4gICAgaWYgKCF0bXBIYXNGaXJlZFN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGNHZXN0dXJlRGF0YShkZXRhaWwsIGV2KTtcbiAgICAvLyBUcnkgdG8gY2FwdHVyZSBwcmVzc1xuICAgIGlmICh0bXBIYXNDYXB0dXJlZCkge1xuICAgICAgaWYgKG9uRW5kKSB7XG4gICAgICAgIG9uRW5kKGRldGFpbCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE5vdCBjYXB0dXJlZCBhbnkgZXZlbnRcbiAgICBpZiAobm90Q2FwdHVyZWQpIHtcbiAgICAgIG5vdENhcHR1cmVkKGRldGFpbCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwb2ludGVyRXZlbnRzID0gY3JlYXRlUG9pbnRlckV2ZW50cyhmaW5hbENvbmZpZy5lbCwgcG9pbnRlckRvd24sIHBvaW50ZXJNb3ZlLCBwb2ludGVyVXAsIHtcbiAgICBjYXB0dXJlOiBmYWxzZSxcbiAgICBwYXNzaXZlLFxuICB9KTtcbiAgY29uc3QgYWJvcnRHZXN0dXJlID0gKCkgPT4ge1xuICAgIHJlc2V0KCk7XG4gICAgcG9pbnRlckV2ZW50cy5zdG9wKCk7XG4gICAgaWYgKG5vdENhcHR1cmVkKSB7XG4gICAgICBub3RDYXB0dXJlZChkZXRhaWwpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBlbmFibGUoZW5hYmxlID0gdHJ1ZSkge1xuICAgICAgaWYgKCFlbmFibGUpIHtcbiAgICAgICAgaWYgKGhhc0NhcHR1cmVkUGFuKSB7XG4gICAgICAgICAgcG9pbnRlclVwKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzZXQoKTtcbiAgICAgIH1cbiAgICAgIHBvaW50ZXJFdmVudHMuZW5hYmxlKGVuYWJsZSk7XG4gICAgfSxcbiAgICBkZXN0cm95KCkge1xuICAgICAgZ2VzdHVyZS5kZXN0cm95KCk7XG4gICAgICBwb2ludGVyRXZlbnRzLmRlc3Ryb3koKTtcbiAgICB9LFxuICB9O1xufTtcbmNvbnN0IGNhbGNHZXN0dXJlRGF0YSA9IChkZXRhaWwsIGV2KSA9PiB7XG4gIGlmICghZXYpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJldlggPSBkZXRhaWwuY3VycmVudFg7XG4gIGNvbnN0IHByZXZZID0gZGV0YWlsLmN1cnJlbnRZO1xuICBjb25zdCBwcmV2VCA9IGRldGFpbC5jdXJyZW50VGltZTtcbiAgdXBkYXRlRGV0YWlsKGV2LCBkZXRhaWwpO1xuICBjb25zdCBjdXJyZW50WCA9IGRldGFpbC5jdXJyZW50WDtcbiAgY29uc3QgY3VycmVudFkgPSBkZXRhaWwuY3VycmVudFk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IChkZXRhaWwuY3VycmVudFRpbWUgPSBub3coZXYpKTtcbiAgY29uc3QgdGltZURlbHRhID0gdGltZXN0YW1wIC0gcHJldlQ7XG4gIGlmICh0aW1lRGVsdGEgPiAwICYmIHRpbWVEZWx0YSA8IDEwMCkge1xuICAgIGNvbnN0IHZlbG9jaXR5WCA9IChjdXJyZW50WCAtIHByZXZYKSAvIHRpbWVEZWx0YTtcbiAgICBjb25zdCB2ZWxvY2l0eVkgPSAoY3VycmVudFkgLSBwcmV2WSkgLyB0aW1lRGVsdGE7XG4gICAgZGV0YWlsLnZlbG9jaXR5WCA9IHZlbG9jaXR5WCAqIDAuNyArIGRldGFpbC52ZWxvY2l0eVggKiAwLjM7XG4gICAgZGV0YWlsLnZlbG9jaXR5WSA9IHZlbG9jaXR5WSAqIDAuNyArIGRldGFpbC52ZWxvY2l0eVkgKiAwLjM7XG4gIH1cbiAgZGV0YWlsLmRlbHRhWCA9IGN1cnJlbnRYIC0gZGV0YWlsLnN0YXJ0WDtcbiAgZGV0YWlsLmRlbHRhWSA9IGN1cnJlbnRZIC0gZGV0YWlsLnN0YXJ0WTtcbiAgZGV0YWlsLmV2ZW50ID0gZXY7XG59O1xuY29uc3QgdXBkYXRlRGV0YWlsID0gKGV2LCBkZXRhaWwpID0+IHtcbiAgLy8gZ2V0IFggY29vcmRpbmF0ZXMgZm9yIGVpdGhlciBhIG1vdXNlIGNsaWNrXG4gIC8vIG9yIGEgdG91Y2ggZGVwZW5kaW5nIG9uIHRoZSBnaXZlbiBldmVudFxuICBsZXQgeCA9IDA7XG4gIGxldCB5ID0gMDtcbiAgaWYgKGV2KSB7XG4gICAgY29uc3QgY2hhbmdlZFRvdWNoZXMgPSBldi5jaGFuZ2VkVG91Y2hlcztcbiAgICBpZiAoY2hhbmdlZFRvdWNoZXMgJiYgY2hhbmdlZFRvdWNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdG91Y2ggPSBjaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgIHggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgeSA9IHRvdWNoLmNsaWVudFk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2LnBhZ2VYICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHggPSBldi5wYWdlWDtcbiAgICAgIHkgPSBldi5wYWdlWTtcbiAgICB9XG4gIH1cbiAgZGV0YWlsLmN1cnJlbnRYID0geDtcbiAgZGV0YWlsLmN1cnJlbnRZID0geTtcbn07XG5jb25zdCBub3cgPSAoZXYpID0+IHtcbiAgcmV0dXJuIGV2LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlR2VzdHVyZSB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IG0gYXMgY2xhbXAgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuaW1wb3J0IHsgaSBhcyBpc1JUTCB9IGZyb20gJy4vZGlyLmpzJztcbmltcG9ydCB7IGNyZWF0ZUdlc3R1cmUgfSBmcm9tICcuL2luZGV4Mi5qcyc7XG5cbmNvbnN0IGNyZWF0ZVN3aXBlQmFja0dlc3R1cmUgPSAoZWwsIGNhblN0YXJ0SGFuZGxlciwgb25TdGFydEhhbmRsZXIsIG9uTW92ZUhhbmRsZXIsIG9uRW5kSGFuZGxlcikgPT4ge1xuICBjb25zdCB3aW4gPSBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBsZXQgcnRsID0gaXNSVEwoZWwpO1xuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIGEgZ2VzdHVyZSBpcyBuZWFyIHRoZSBlZGdlXG4gICAqIG9mIHRoZSBzY3JlZW4uIElmIHRydWUsIHRoZW4gdGhlIHN3aXBlXG4gICAqIHRvIGdvIGJhY2sgZ2VzdHVyZSBzaG91bGQgcHJvY2VlZC5cbiAgICovXG4gIGNvbnN0IGlzQXRFZGdlID0gKGRldGFpbCkgPT4ge1xuICAgIGNvbnN0IHRocmVzaG9sZCA9IDUwO1xuICAgIGNvbnN0IHsgc3RhcnRYIH0gPSBkZXRhaWw7XG4gICAgaWYgKHJ0bCkge1xuICAgICAgcmV0dXJuIHN0YXJ0WCA+PSB3aW4uaW5uZXJXaWR0aCAtIHRocmVzaG9sZDtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0WCA8PSB0aHJlc2hvbGQ7XG4gIH07XG4gIGNvbnN0IGdldERlbHRhWCA9IChkZXRhaWwpID0+IHtcbiAgICByZXR1cm4gcnRsID8gLWRldGFpbC5kZWx0YVggOiBkZXRhaWwuZGVsdGFYO1xuICB9O1xuICBjb25zdCBnZXRWZWxvY2l0eVggPSAoZGV0YWlsKSA9PiB7XG4gICAgcmV0dXJuIHJ0bCA/IC1kZXRhaWwudmVsb2NpdHlYIDogZGV0YWlsLnZlbG9jaXR5WDtcbiAgfTtcbiAgY29uc3QgY2FuU3RhcnQgPSAoZGV0YWlsKSA9PiB7XG4gICAgLyoqXG4gICAgICogVGhlIHVzZXIncyBsb2NhbGUgY2FuIGNoYW5nZSBtaWQtc2Vzc2lvbixcbiAgICAgKiBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRleHQgZGlyZWN0aW9uIGF0XG4gICAgICogdGhlIGJlZ2lubmluZyBvZiBldmVyeSBnZXN0dXJlLlxuICAgICAqL1xuICAgIHJ0bCA9IGlzUlRMKGVsKTtcbiAgICByZXR1cm4gaXNBdEVkZ2UoZGV0YWlsKSAmJiBjYW5TdGFydEhhbmRsZXIoKTtcbiAgfTtcbiAgY29uc3Qgb25Nb3ZlID0gKGRldGFpbCkgPT4ge1xuICAgIC8vIHNldCB0aGUgdHJhbnNpdGlvbiBhbmltYXRpb24ncyBwcm9ncmVzc1xuICAgIGNvbnN0IGRlbHRhID0gZ2V0RGVsdGFYKGRldGFpbCk7XG4gICAgY29uc3Qgc3RlcFZhbHVlID0gZGVsdGEgLyB3aW4uaW5uZXJXaWR0aDtcbiAgICBvbk1vdmVIYW5kbGVyKHN0ZXBWYWx1ZSk7XG4gIH07XG4gIGNvbnN0IG9uRW5kID0gKGRldGFpbCkgPT4ge1xuICAgIC8vIHRoZSBzd2lwZSBiYWNrIGdlc3R1cmUgaGFzIGVuZGVkXG4gICAgY29uc3QgZGVsdGEgPSBnZXREZWx0YVgoZGV0YWlsKTtcbiAgICBjb25zdCB3aWR0aCA9IHdpbi5pbm5lcldpZHRoO1xuICAgIGNvbnN0IHN0ZXBWYWx1ZSA9IGRlbHRhIC8gd2lkdGg7XG4gICAgY29uc3QgdmVsb2NpdHkgPSBnZXRWZWxvY2l0eVgoZGV0YWlsKTtcbiAgICBjb25zdCB6ID0gd2lkdGggLyAyLjA7XG4gICAgY29uc3Qgc2hvdWxkQ29tcGxldGUgPSB2ZWxvY2l0eSA+PSAwICYmICh2ZWxvY2l0eSA+IDAuMiB8fCBkZWx0YSA+IHopO1xuICAgIGNvbnN0IG1pc3NpbmcgPSBzaG91bGRDb21wbGV0ZSA/IDEgLSBzdGVwVmFsdWUgOiBzdGVwVmFsdWU7XG4gICAgY29uc3QgbWlzc2luZ0Rpc3RhbmNlID0gbWlzc2luZyAqIHdpZHRoO1xuICAgIGxldCByZWFsRHVyID0gMDtcbiAgICBpZiAobWlzc2luZ0Rpc3RhbmNlID4gNSkge1xuICAgICAgY29uc3QgZHVyID0gbWlzc2luZ0Rpc3RhbmNlIC8gTWF0aC5hYnModmVsb2NpdHkpO1xuICAgICAgcmVhbER1ciA9IE1hdGgubWluKGR1ciwgNTQwKTtcbiAgICB9XG4gICAgb25FbmRIYW5kbGVyKHNob3VsZENvbXBsZXRlLCBzdGVwVmFsdWUgPD0gMCA/IDAuMDEgOiBjbGFtcCgwLCBzdGVwVmFsdWUsIDAuOTk5OSksIHJlYWxEdXIpO1xuICB9O1xuICByZXR1cm4gY3JlYXRlR2VzdHVyZSh7XG4gICAgZWwsXG4gICAgZ2VzdHVyZU5hbWU6ICdnb2JhY2stc3dpcGUnLFxuICAgIGdlc3R1cmVQcmlvcml0eTogNDAsXG4gICAgdGhyZXNob2xkOiAxMCxcbiAgICBjYW5TdGFydCxcbiAgICBvblN0YXJ0OiBvblN0YXJ0SGFuZGxlcixcbiAgICBvbk1vdmUsXG4gICAgb25FbmQsXG4gIH0pO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlU3dpcGVCYWNrR2VzdHVyZSB9O1xuIl0sIm5hbWVzIjpbIkdlc3R1cmVEZWxlZ2F0ZSIsImNvbnN0cnVjdG9yIiwiY3RybCIsImlkIiwibmFtZSIsInByaW9yaXR5IiwiZGlzYWJsZVNjcm9sbCIsInRoaXMiLCJjYW5TdGFydCIsInN0YXJ0IiwiY2FwdHVyZSIsImNhcHR1cmVkIiwicmVsZWFzZSIsImVuYWJsZVNjcm9sbCIsImRlc3Ryb3kiLCJ1bmRlZmluZWQiLCJCbG9ja2VyRGVsZWdhdGUiLCJkaXNhYmxlIiwiYmxvY2siLCJnZXN0dXJlIiwiZGlzYWJsZUdlc3R1cmUiLCJ1bmJsb2NrIiwiZW5hYmxlR2VzdHVyZSIsIkJBQ0tEUk9QX05PX1NDUk9MTCIsIkdFU1RVUkVfQ09OVFJPTExFUiIsImdlc3R1cmVJZCIsInJlcXVlc3RlZFN0YXJ0IiwiTWFwIiwiZGlzYWJsZWRHZXN0dXJlcyIsImRpc2FibGVkU2Nyb2xsIiwiU2V0IiwiY3JlYXRlR2VzdHVyZSIsImNvbmZpZyIsIl9hIiwibmV3SUQiLCJjcmVhdGVCbG9ja2VyIiwib3B0cyIsImFyZ3VtZW50cyIsImxlbmd0aCIsImdlc3R1cmVOYW1lIiwic2V0IiwiZGVsZXRlIiwibWF4UHJpb3JpdHkiLCJmb3JFYWNoIiwidmFsdWUiLCJNYXRoIiwibWF4IiwiY2FwdHVyZWRJZCIsImNsZWFyIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRvY3VtZW50IiwiZGlzcGF0Y2hFdmVudCIsImdldCIsImFkZCIsInNpemUiLCJib2R5IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaXNEaXNhYmxlZCIsImlzQ2FwdHVyZWQiLCJpc1Njcm9sbERpc2FibGVkIiwiZGlzYWJsZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZWwiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImxpc3RlbmVyT3B0cyIsInN1cHBvcnRzUGFzc2l2ZSIsInBhc3NpdmUiLCJub2RlIiwiX3NQYXNzaXZlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlIiwiZ2V0RG9jdW1lbnQiLCJEb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJoYXNDYXB0dXJlZFBhbiIsImhhc1N0YXJ0ZWRQYW4iLCJoYXNGaXJlZFN0YXJ0IiwiaXNNb3ZlUXVldWVkIiwiZmluYWxDb25maWciLCJhc3NpZ24iLCJkaXJlY3Rpb24iLCJnZXN0dXJlUHJpb3JpdHkiLCJtYXhBbmdsZSIsInRocmVzaG9sZCIsIm9uV2lsbFN0YXJ0Iiwib25TdGFydCIsIm9uRW5kIiwibm90Q2FwdHVyZWQiLCJvbk1vdmUiLCJibHVyT25TdGFydCIsInR5cGUiLCJzdGFydFgiLCJzdGFydFkiLCJzdGFydFRpbWUiLCJjdXJyZW50WCIsImN1cnJlbnRZIiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwiZGVsdGFYIiwiZGVsdGFZIiwiY3VycmVudFRpbWUiLCJkYXRhIiwicGFuIiwiY3JlYXRlUGFuUmVjb2duaXplciIsInRocmVzaCIsInJhZGlhbnMiLCJQSSIsImlzRGlyWCIsIm1heENvc2luZSIsImNvcyIsImRpcnR5IiwiaXNQYW4iLCJ4IiwieSIsImRldGVjdCIsImRpc3RhbmNlIiwiaHlwb3RlbnVzZSIsInNxcnQiLCJjb3NpbmUiLCJpc0dlc3R1cmUiLCJnZXREaXJlY3Rpb24iLCJmaXJlT25Nb3ZlIiwidHJ5VG9DYXB0dXJlUGFuIiwidGhlbiIsImZpcmVPblN0YXJ0IiwiYmx1ckFjdGl2ZUVsZW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiYmx1ciIsInJlc2V0IiwicG9pbnRlclVwIiwiZXYiLCJ0bXBIYXNDYXB0dXJlZCIsInRtcEhhc0ZpcmVkU3RhcnQiLCJjYWxjR2VzdHVyZURhdGEiLCJwb2ludGVyRXZlbnRzIiwiY3JlYXRlUG9pbnRlckV2ZW50cyIsInBvaW50ZXJEb3duIiwicG9pbnRlck1vdmUiLCJvcHRpb25zIiwicm1Ub3VjaFN0YXJ0Iiwicm1Ub3VjaE1vdmUiLCJybVRvdWNoRW5kIiwicm1Ub3VjaENhbmNlbCIsInJtTW91c2VTdGFydCIsInJtTW91c2VNb3ZlIiwicm1Nb3VzZVVwIiwibGFzdFRvdWNoRXZlbnQiLCJoYW5kbGVUb3VjaFN0YXJ0IiwiRGF0ZSIsIm5vdyIsInRhcmdldCIsImhhbmRsZVRvdWNoRW5kIiwiaGFuZGxlTW91c2VEb3duIiwiaGFuZGxlTW91c2VVcCIsInN0b3BUb3VjaCIsInN0b3BNb3VzZSIsInN0b3AiLCJlbmFibGUiLCJ0aW1lU3RhbXAiLCJ1cGRhdGVEZXRhaWwiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhYm9ydEdlc3R1cmUiLCJwcmV2WCIsInByZXZZIiwicHJldlQiLCJ0aW1lRGVsdGEiLCJjaGFuZ2VkVG91Y2hlcyIsInRvdWNoIiwiY2xpZW50WCIsImNsaWVudFkiLCJwYWdlWCIsInBhZ2VZIiwiY3JlYXRlU3dpcGVCYWNrR2VzdHVyZSIsImNhblN0YXJ0SGFuZGxlciIsIm9uU3RhcnRIYW5kbGVyIiwib25Nb3ZlSGFuZGxlciIsIm9uRW5kSGFuZGxlciIsIndpbiIsImRlZmF1bHRWaWV3IiwicnRsIiwiaXNSVEwiLCJnZXREZWx0YVgiLCJpbm5lcldpZHRoIiwiaXNBdEVkZ2UiLCJzdGVwVmFsdWUiLCJkZWx0YSIsIndpZHRoIiwidmVsb2NpdHkiLCJnZXRWZWxvY2l0eVgiLCJzaG91bGRDb21wbGV0ZSIsIm1pc3NpbmdEaXN0YW5jZSIsInJlYWxEdXIiLCJkdXIiLCJhYnMiLCJtaW4iLCJjbGFtcCJdLCJzb3VyY2VSb290IjoiIn0=