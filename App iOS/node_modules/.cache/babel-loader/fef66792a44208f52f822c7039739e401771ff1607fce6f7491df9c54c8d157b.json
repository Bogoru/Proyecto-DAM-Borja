{"ast":null,"code":"var _jsxFileName = \"/Users/Misana/Desktop/Borja/src/pages/Lluvia.jsx\",\n  _s = $RefreshSig$();\nimport { IonButton, IonContent, IonFooter, IonHeader, IonImg, IonCheckbox, IonPage, IonTitle, IonToolbar } from '@ionic/react';\nimport './Lluvia.css';\nimport { ReactSVG } from 'react-svg';\nimport { BleClient, numbersToDataView } from '@capacitor-community/bluetooth-le';\nimport { BLE } from '@ionic-native/ble';\nimport { useEffect, useState } from 'react';\nimport Lluvia from '../imagenes/titulolluvia.svg';\nimport Volver from '../imagenes/volver.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home() {\n  _s();\n  const HEART_RATE_SERVICE = '0000abcd-0000-1000-8000-00805f9b34fb';\n  const READ_CHARACTERISTIC = \"00001111-0000-1000-8000-00805F9B34FB\";\n  const WRITE_CHARACTERISTIC = \"00001111-0000-1000-8000-00805F9B34FB\";\n  const [isChecked, setIsChecked] = useState(false);\n  const guardar = event => {\n    setIsChecked(event.target.value);\n    if (isChecked == false) {\n      setIsChecked(true);\n      console.log(\"Seteado true\");\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals => {\n        console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n        for (let i = 0; i < peripherals.length; i++) {\n          console.log(peripherals[i].id);\n          await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([1]));\n        }\n      }, error => {\n        console.log('Error al buscar dispositivos conectados: ' + error);\n      });\n    } else if (isChecked == true) {\n      setIsChecked(false);\n      console.log(\"Seteado false\");\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals => {\n        console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n        for (let i = 0; i < peripherals.length; i++) {\n          console.log(peripherals[i].id);\n          await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([1]));\n        }\n      }, error => {\n        console.log('Error al buscar dispositivos conectados: ' + error);\n      });\n    }\n  };\n  useEffect(() => {\n    BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals => {\n      console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n      for (let i = 0; i < peripherals.length; i++) {\n        console.log(peripherals[i].id);\n      }\n    }, error => {\n      console.log('Error al buscar dispositivos conectados: ' + error);\n    });\n    setTimeout(comprobar, 20);\n    function comprobar() {\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals => {\n        console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n        for (let i = 0; i < peripherals.length; i++) {\n          console.log(peripherals[i].id);\n          const estado = await BleClient.read(peripherals[i].id, HEART_RATE_SERVICE, READ_CHARACTERISTIC);\n          console.log('ESTADO:', estado.getUint8(0));\n          if (estado.getUint8(0) == 0) {\n            setIsChecked(false);\n          } else if (estado.getUint8(0) == 1) {\n            setIsChecked(true);\n          }\n        }\n      }, error => {\n        console.log('Error al buscar dispositivos conectados: ' + error);\n      });\n    }\n  }, []);\n  function back() {\n    window.location.href = '/Menu';\n  }\n  function cambiarValor() {\n    if (isChecked == true) {\n      setIsChecked(false);\n    } else if (isChecked == false) {\n      setIsChecked(true);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      className: \"fondoLluvia\",\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        className: \"fondoLluvia\",\n        children: /*#__PURE__*/_jsxDEV(ReactSVG, {\n          src: Lluvia\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      fullscreen: true,\n      className: \"fondo\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"texto\",\n        children: \"Con nuestra funci\\xF3n de control basada en la lluvia, puedes decidir c\\xF3mo quieres que tus dispositivos respondan cuando detecten lluvia.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IonCheckbox, {\n        className: \"checkbox\",\n        checked: isChecked,\n        onIonChange: guardar,\n        children: \"Cerrar en caso de lluvia\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactSVG, {\n        src: Volver,\n        className: \"imgAtras3\",\n        onClick: back\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"0JDRpl6hj96HOi0frTBApbOrHao=\");\n_c = Home;\n;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["IonButton","IonContent","IonFooter","IonHeader","IonImg","IonCheckbox","IonPage","IonTitle","IonToolbar","ReactSVG","BleClient","numbersToDataView","BLE","useEffect","useState","Lluvia","Volver","jsxDEV","_jsxDEV","Home","_s","HEART_RATE_SERVICE","READ_CHARACTERISTIC","WRITE_CHARACTERISTIC","isChecked","setIsChecked","guardar","event","target","value","console","log","connectedPeripheralsWithServices","then","peripherals","i","length","id","write","error","setTimeout","comprobar","estado","read","getUint8","back","window","location","href","cambiarValor","children","className","src","fileName","_jsxFileName","lineNumber","columnNumber","fullscreen","checked","onIonChange","onClick","_c","$RefreshReg$"],"sources":["/Users/Misana/Desktop/Borja/src/pages/Lluvia.jsx"],"sourcesContent":["import { IonButton, IonContent, IonFooter, IonHeader, IonImg, IonCheckbox, IonPage, IonTitle, IonToolbar } from '@ionic/react';\nimport './Lluvia.css';\nimport { ReactSVG } from 'react-svg';\nimport { BleClient, numbersToDataView } from '@capacitor-community/bluetooth-le';\nimport { BLE } from '@ionic-native/ble';\nimport { useEffect, useState } from 'react';\n\n\nimport Lluvia from '../imagenes/titulolluvia.svg';\nimport Volver from '../imagenes/volver.svg'\n\nfunction Home () {\n\n  const HEART_RATE_SERVICE = '0000abcd-0000-1000-8000-00805f9b34fb';\n  const READ_CHARACTERISTIC = \"00001111-0000-1000-8000-00805F9B34FB\";\n  const WRITE_CHARACTERISTIC = \"00001111-0000-1000-8000-00805F9B34FB\";\n\n  const [isChecked, setIsChecked] = useState(false);\n\n  const guardar = (event) => {\n    \n    setIsChecked(event.target.value);\n\n    if(isChecked == false){\n      setIsChecked(true);\n      console.log(\"Seteado true\");\n\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n            await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([1]));\n          }\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n\n    }else if(isChecked == true){\n      setIsChecked(false);\n      console.log(\"Seteado false\");\n\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n            await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([1]));\n          }\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n      \n    }\n\n  }\n\n  useEffect(() => {\n    \n    BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n      async peripherals => {\n        console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n        for(let i = 0; i < peripherals.length; i++) {\n          console.log(peripherals[i].id);       \n        }\n      },\n      error => {\n        console.log('Error al buscar dispositivos conectados: ' + error);\n      }\n    );\n\n    setTimeout(comprobar, 20);\n\n    function comprobar(){\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n            const estado = await BleClient.read(peripherals[i].id, HEART_RATE_SERVICE, READ_CHARACTERISTIC);\n            console.log('ESTADO:', estado.getUint8(0));   \n            if(estado.getUint8(0) == 0){\n              setIsChecked(false)\n            }else if(estado.getUint8(0) == 1){\n              setIsChecked(true)\n            }\n          }\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n    }\n\n  }, []);\n\n    function back(){\n      window.location.href ='/Menu';\n    }\n    \n    function cambiarValor(){\n      if(isChecked == true){\n        setIsChecked(false)\n      }else if(isChecked == false){\n        setIsChecked(true)\n      }\n    }\n    \n  return (\n    <IonPage>\n\n        <IonHeader className='fondoLluvia'>\n          <IonToolbar className='fondoLluvia'>\n            <ReactSVG src={Lluvia}></ReactSVG>\n          </IonToolbar>\n        </IonHeader>\n\n\n      <IonContent fullscreen className='fondo'>\n\n        <h2 className='texto'>Con nuestra función de control basada en la lluvia, puedes decidir cómo quieres que tus dispositivos respondan cuando detecten lluvia.</h2>\n        <IonCheckbox className='checkbox' checked={isChecked} onIonChange={guardar}>Cerrar en caso de lluvia</IonCheckbox>\n        <ReactSVG src={Volver} className='imgAtras3' onClick={back}></ReactSVG>\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Home;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}