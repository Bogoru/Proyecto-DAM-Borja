{"ast":null,"code":"import{IonButton,IonContent,IonToolbar,IonHeader,IonImg,IonLabel,IonPage,IonTitle,IonDatetime}from'@ionic/react';import React,{useEffect,useState}from'react';import{ReactSVG}from'react-svg';import{BleClient,textToDataView}from'@capacitor-community/bluetooth-le';import{BLE}from'@ionic-native/ble';import'./Temporizador.css';import TituloTiempo from'../imagenes/titulotiempo.svg';import Volver from'../imagenes/volver.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const HEART_RATE_SERVICE='0000abcd-0000-1000-8000-00805f9b34fb';const WRITE_CHARACTERISTIC2=\"00004321-0000-1000-8000-00805F9B34FB\";function Home(){useEffect(()=>{const interval=setInterval(()=>{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);}if(peripherals.length<=0){window.location.href='/Dispositivos';}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});},1000);},[]);const[selectedDate,setSelectedDate]=useState('');const handleDateChange=event=>{setSelectedDate(event.target.value);};const handleClick1=()=>{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);await BleClient.write(peripherals[i].id,HEART_RATE_SERVICE,WRITE_CHARACTERISTIC2,textToDataView('12:55'));console.log('written 12:55');}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});};const handleClick2=()=>{console.log('Fecha seleccionada:',selectedDate);};function back(){window.location.href='/Menu';}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{className:\"fondoTiempo\",children:/*#__PURE__*/_jsx(IonToolbar,{className:\"fondoTiempo\",children:/*#__PURE__*/_jsx(ReactSVG,{src:TituloTiempo})})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,className:\"fondoTiempo\",children:[/*#__PURE__*/_jsx(IonLabel,{className:\"tituloSeleccionar\",children:\"Seleccione una hora: \"}),/*#__PURE__*/_jsx(IonDatetime,{presentation:\"time\",value:selectedDate,onIonChange:handleDateChange,className:\"timer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contenedor-buttons\",children:[/*#__PURE__*/_jsx(IonButton,{onClick:handleClick1,className:\"buttons\",color:\"#797979\",children:\"Abrir\"}),/*#__PURE__*/_jsx(IonButton,{onClick:handleClick2,className:\"buttons\",color:\"var(--color-personalizado)\",children:\"Cerrar\"})]}),/*#__PURE__*/_jsx(ReactSVG,{src:Volver,className:\"imgAtras2\",onClick:back})]})]});};export default Home;","map":{"version":3,"names":["IonButton","IonContent","IonToolbar","IonHeader","IonImg","IonLabel","IonPage","IonTitle","IonDatetime","React","useEffect","useState","ReactSVG","BleClient","textToDataView","BLE","TituloTiempo","Volver","jsx","_jsx","jsxs","_jsxs","HEART_RATE_SERVICE","WRITE_CHARACTERISTIC2","Home","interval","setInterval","connectedPeripheralsWithServices","then","peripherals","console","log","i","length","id","window","location","href","error","selectedDate","setSelectedDate","handleDateChange","event","target","value","handleClick1","write","handleClick2","back","children","className","src","fullscreen","presentation","onIonChange","onClick","color"],"sources":["/Users/Misana/Desktop/Borja/src/pages/Temporizador.jsx"],"sourcesContent":["import { IonButton, IonContent, IonToolbar, IonHeader, IonImg, IonLabel, IonPage, IonTitle, IonDatetime } from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { ReactSVG } from 'react-svg';\nimport { BleClient, textToDataView } from '@capacitor-community/bluetooth-le';\nimport { BLE } from '@ionic-native/ble';\n\nimport './Temporizador.css';\n\nimport TituloTiempo from '../imagenes/titulotiempo.svg'\nimport Volver from '../imagenes/volver.svg'\n\nconst HEART_RATE_SERVICE = '0000abcd-0000-1000-8000-00805f9b34fb';\nconst WRITE_CHARACTERISTIC2 = \"00004321-0000-1000-8000-00805F9B34FB\"\n\nfunction Home () {\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n          }\n\n          if(peripherals.length <= 0){\n            window.location.href ='/Dispositivos';\n          }\n\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n\n    }, 1000);\n\n  }, []);\n\n    const [selectedDate, setSelectedDate] = useState('');\n\n    const handleDateChange = (event) => {\n        setSelectedDate(event.target.value);\n      };\n    \n    const handleClick1 = () => {\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n            await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC2, textToDataView('12:55'));\n            console.log('written 12:55');\n          }\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n    };  \n\n    const handleClick2 = () => {\n      console.log('Fecha seleccionada:', selectedDate);\n  };  \n\n  function back(){\n    window.location.href ='/Menu';\n  }\n\n  return (\n    <IonPage>\n        <IonHeader className='fondoTiempo'>\n          <IonToolbar className='fondoTiempo'>\n            <ReactSVG src={TituloTiempo}></ReactSVG>\n          </IonToolbar>\n        </IonHeader>\n\n      <IonContent fullscreen className='fondoTiempo'>\n\n        <IonLabel className='tituloSeleccionar'>Seleccione una hora: </IonLabel>\n\n        <IonDatetime presentation='time' value={selectedDate} onIonChange={handleDateChange} className='timer'></IonDatetime>\n\n        <div className='contenedor-buttons'>\n          <IonButton onClick={handleClick1} className='buttons' color='#797979'>Abrir</IonButton>\n          <IonButton onClick={handleClick2} className='buttons' color=\"var(--color-personalizado)\">Cerrar</IonButton>\n        </div>\n\n        <ReactSVG src={Volver} className='imgAtras2' onClick={back}></ReactSVG>\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}