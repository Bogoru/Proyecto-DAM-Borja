{"ast":null,"code":"import{IonButton,IonContent,IonToolbar,IonHeader,IonLabel,IonPage,IonDatetime}from'@ionic/react';import React,{useEffect,useState}from'react';import{ReactSVG}from'react-svg';import{BleClient,textToDataView}from'@capacitor-community/bluetooth-le';import{BLE}from'@ionic-native/ble';import'./Temporizador.css';import TituloTiempo from'../imagenes/titulotiempo.svg';import Volver from'../imagenes/volver.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const HEART_RATE_SERVICE='0000abcd-0000-1000-8000-00805f9b34fb';const WRITE_CHARACTERISTIC2=\"00004321-0000-1000-8000-00805F9B34FB\";function Home(){const[currentTime,setCurrentTime]=useState('');useEffect(()=>{const interval=setInterval(()=>{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);}if(peripherals.length<=0){window.location.href='/Dispositivos';}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});},2000);const getCurrentTime=()=>{const date=new Date();const hours=date.getHours().toString().padStart(2,'0');const minutes=date.getMinutes().toString().padStart(2,'0');const seconds=date.getSeconds().toString().padStart(2,'0');const timeStr=`${hours}:${minutes}:${seconds}`;setCurrentTime(timeStr);};getCurrentTime();const interval2=setInterval(()=>{getCurrentTime();},30000);return()=>{clearInterval(interval2);};},[]);const[selectedDate,setSelectedDate]=useState('');const cambios=event=>{setSelectedDate(event.target.value);};const abrir=()=>{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);await BleClient.write(peripherals[i].id,HEART_RATE_SERVICE,WRITE_CHARACTERISTIC2,textToDataView(selectedDate.slice(11,16)+\" \"+currentTime+\" 1\"));}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});};const cerrar=()=>{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);await BleClient.write(peripherals[i].id,HEART_RATE_SERVICE,WRITE_CHARACTERISTIC2,textToDataView(selectedDate.slice(11,16)+\" \"+currentTime+\" 0\"));}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});};function back(){window.location.href='/Menu';}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{className:\"fondoTiempo\",children:/*#__PURE__*/_jsx(IonToolbar,{className:\"fondoTiempo\",children:/*#__PURE__*/_jsx(ReactSVG,{src:TituloTiempo})})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,className:\"fondoTiempo\",children:[/*#__PURE__*/_jsx(IonLabel,{className:\"tituloSeleccionar\",children:\"Seleccione una hora: \"}),/*#__PURE__*/_jsx(IonDatetime,{presentation:\"time\",value:selectedDate,onIonChange:cambios,className:\"timer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contenedor-buttons\",children:[/*#__PURE__*/_jsx(IonButton,{onClick:abrir,className:\"buttons\",color:\"#797979\",children:\"Abrir\"}),/*#__PURE__*/_jsx(IonButton,{onClick:cerrar,className:\"buttons\",color:\"var(--color-personalizado)\",children:\"Cerrar\"})]}),/*#__PURE__*/_jsx(ReactSVG,{src:Volver,className:\"imgAtras2\",onClick:back})]})]});};export default Home;","map":{"version":3,"names":["IonButton","IonContent","IonToolbar","IonHeader","IonLabel","IonPage","IonDatetime","React","useEffect","useState","ReactSVG","BleClient","textToDataView","BLE","TituloTiempo","Volver","jsx","_jsx","jsxs","_jsxs","HEART_RATE_SERVICE","WRITE_CHARACTERISTIC2","Home","currentTime","setCurrentTime","interval","setInterval","connectedPeripheralsWithServices","then","peripherals","console","log","i","length","id","window","location","href","error","getCurrentTime","date","Date","hours","getHours","toString","padStart","minutes","getMinutes","seconds","getSeconds","timeStr","interval2","clearInterval","selectedDate","setSelectedDate","cambios","event","target","value","abrir","write","slice","cerrar","back","children","className","src","fullscreen","presentation","onIonChange","onClick","color"],"sources":["/Users/Misana/Desktop/Borja/src/pages/Temporizador.jsx"],"sourcesContent":["import { IonButton, IonContent, IonToolbar, IonHeader, IonLabel, IonPage, IonDatetime } from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { ReactSVG } from 'react-svg';\nimport { BleClient, textToDataView } from '@capacitor-community/bluetooth-le';\nimport { BLE } from '@ionic-native/ble';\n\nimport './Temporizador.css';\n\nimport TituloTiempo from '../imagenes/titulotiempo.svg'\nimport Volver from '../imagenes/volver.svg'\n\nconst HEART_RATE_SERVICE = '0000abcd-0000-1000-8000-00805f9b34fb';\nconst WRITE_CHARACTERISTIC2 = \"00004321-0000-1000-8000-00805F9B34FB\"\n\nfunction Home () {\n  const [currentTime, setCurrentTime] = useState('');\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n          }\n\n          if(peripherals.length <= 0){\n            window.location.href ='/Dispositivos';\n          }\n\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n\n    }, 2000);\n\n    const getCurrentTime = () => {\n      const date = new Date();\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      const seconds = date.getSeconds().toString().padStart(2, '0');\n      const timeStr = `${hours}:${minutes}:${seconds}`;\n      setCurrentTime(timeStr);\n    };\n    getCurrentTime();\n\n    const interval2 = setInterval(() => {\n      getCurrentTime();\n    }, 30000);\n\n    return () => {\n      clearInterval(interval2);\n    };\n\n  }, []);\n\n    const [selectedDate, setSelectedDate] = useState('');\n\n    const cambios = (event) => {\n        setSelectedDate(event.target.value);\n      };\n    \n    const abrir = () => {\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n            await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC2, textToDataView(selectedDate.slice(11, 16) + \" \" + currentTime + \" 1\"));\n          }\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n    };  \n\n    const cerrar = () => {\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n            await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC2, textToDataView(selectedDate.slice(11, 16) + \" \" + currentTime + \" 0\"));\n          }\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );    };  \n\n  function back(){\n    window.location.href ='/Menu';\n  }\n\n  return (\n    <IonPage>\n        <IonHeader className='fondoTiempo'>\n          <IonToolbar className='fondoTiempo'>\n            <ReactSVG src={TituloTiempo}></ReactSVG>\n          </IonToolbar>\n        </IonHeader>\n\n      <IonContent fullscreen className='fondoTiempo'>\n\n        <IonLabel className='tituloSeleccionar'>Seleccione una hora: </IonLabel>\n\n        <IonDatetime presentation='time' value={selectedDate} onIonChange={cambios} className='timer'></IonDatetime>\n\n        <div className='contenedor-buttons'>\n          <IonButton onClick={abrir} className='buttons' color='#797979'>Abrir</IonButton>\n          <IonButton onClick={cerrar} className='buttons' color=\"var(--color-personalizado)\">Cerrar</IonButton>\n        </div>\n\n        <ReactSVG src={Volver} className='imgAtras2' onClick={back}></ReactSVG>\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}