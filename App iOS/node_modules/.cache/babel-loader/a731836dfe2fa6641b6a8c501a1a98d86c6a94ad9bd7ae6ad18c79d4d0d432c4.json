{"ast":null,"code":"import{IonContent,IonHeader,IonPage,IonAlet,IonToolbar,IonIcon,IonLabel}from'@ionic/react';import{useEffect,useState}from'react';import{BleClient,numbersToDataView}from'@capacitor-community/bluetooth-le';import{useHistory}from'react-router-dom';import'./Movimiento.css';import{ReactSVG}from'react-svg';import{BLE}from'@ionic-native/ble';import headerControl from'../imagenes/headercontrol.svg';import abrirTodo from'../imagenes/abrirtodo.svg';import cerrarTodo from'../imagenes/cerrartodo.svg';import abrir1 from'../imagenes/abrir.svg';import cerrar1 from'../imagenes/cerrar.svg';import barra from'../imagenes/barra.svg';import Volver from'../imagenes/volver.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const history=useHistory();const HEART_RATE_SERVICE='0000abcd-0000-1000-8000-00805f9b34fb';const WRITE_CHARACTERISTIC=\"00001234-0000-1000-8000-00805F9B34FB\";useEffect(()=>{const interval=setInterval(()=>{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);}if(peripherals.length<=0){window.location.href='/Dispositivos';}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});},1000);},[]);async function abrir(){try{if(BleClient.getConnectedDevices([])===0){window.location.href='/Dispositivos';}else{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);await BleClient.write(peripherals[i].id,HEART_RATE_SERVICE,WRITE_CHARACTERISTIC,numbersToDataView([1]));}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});}}catch(error){console.error(error);}}async function cerrar(){try{if(BleClient.getConnectedDevices([])===0){window.location.href='/Dispositivos';}else{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);await BleClient.write(peripherals[i].id,HEART_RATE_SERVICE,WRITE_CHARACTERISTIC,numbersToDataView([2]));}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});}}catch(error){console.error(error);}}async function parar(){try{if(BleClient.getConnectedDevices([])===0){window.location.href='/Dispositivos';}else{BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(async peripherals=>{console.log('Dispositivos conectados con el servicio '+HEART_RATE_SERVICE+':');for(let i=0;i<peripherals.length;i++){console.log(peripherals[i].id);await BleClient.write(peripherals[i].id,HEART_RATE_SERVICE,WRITE_CHARACTERISTIC,numbersToDataView([3]));}},error=>{console.log('Error al buscar dispositivos conectados: '+error);});}}catch(error){console.error(error);}}function back(){window.location.href='/Menu';}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{className:\"fondo2\",children:/*#__PURE__*/_jsx(IonToolbar,{className:\"fondo2\",children:/*#__PURE__*/_jsx(ReactSVG,{src:headerControl,className:\"svg\"})})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,className:\"fondo2\",scrollY:\"false\",children:[/*#__PURE__*/_jsx(ReactSVG,{src:abrirTodo,onClick:abrir,className:\"svg1\"}),/*#__PURE__*/_jsx(ReactSVG,{src:cerrarTodo,onClick:cerrar,className:\"svg1\"}),/*#__PURE__*/_jsx(ReactSVG,{src:barra,className:\"svg1\"}),/*#__PURE__*/_jsx(ReactSVG,{src:abrir1,onPointerDown:abrir,onPointerUp:parar,className:\"svg1\"}),/*#__PURE__*/_jsx(ReactSVG,{src:cerrar1,onPointerDown:cerrar,onPointerUp:parar,className:\"svg1\"}),/*#__PURE__*/_jsx(ReactSVG,{src:barra,className:\"svg1\"}),/*#__PURE__*/_jsx(ReactSVG,{src:Volver,className:\"imgAtras\",onClick:back})]})]});};export default Home;","map":{"version":3,"names":["IonContent","IonHeader","IonPage","IonAlet","IonToolbar","IonIcon","IonLabel","useEffect","useState","BleClient","numbersToDataView","useHistory","ReactSVG","BLE","headerControl","abrirTodo","cerrarTodo","abrir1","cerrar1","barra","Volver","jsx","_jsx","jsxs","_jsxs","Home","history","HEART_RATE_SERVICE","WRITE_CHARACTERISTIC","interval","setInterval","connectedPeripheralsWithServices","then","peripherals","console","log","i","length","id","window","location","href","error","abrir","getConnectedDevices","write","cerrar","parar","back","children","className","src","fullscreen","scrollY","onClick","onPointerDown","onPointerUp"],"sources":["/Users/Misana/Desktop/Borja/src/pages/Movimiento.jsx"],"sourcesContent":["import { IonContent, IonHeader, IonPage, IonAlet, IonToolbar, IonIcon, IonLabel } from '@ionic/react';\nimport { useEffect,useState } from 'react';\nimport { BleClient, numbersToDataView } from '@capacitor-community/bluetooth-le';\nimport { useHistory } from 'react-router-dom';\nimport './Movimiento.css';\nimport { ReactSVG } from 'react-svg';\n\nimport { BLE } from '@ionic-native/ble';\nimport headerControl from '../imagenes/headercontrol.svg'\nimport abrirTodo from '../imagenes/abrirtodo.svg'\nimport cerrarTodo from '../imagenes/cerrartodo.svg'\nimport abrir1 from '../imagenes/abrir.svg'\nimport cerrar1 from '../imagenes/cerrar.svg'\nimport barra from '../imagenes/barra.svg'\nimport Volver from '../imagenes/volver.svg'\n\nfunction Home () {\n\n  const history = useHistory();\n\n  const HEART_RATE_SERVICE = '0000abcd-0000-1000-8000-00805f9b34fb';\n  const WRITE_CHARACTERISTIC = \"00001234-0000-1000-8000-00805F9B34FB\";\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n\n      BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n        async peripherals => {\n          console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n          for(let i = 0; i < peripherals.length; i++) {\n            console.log(peripherals[i].id);\n          }\n\n          if(peripherals.length <= 0){\n            window.location.href ='/Dispositivos';\n          }\n\n        },\n        error => {\n          console.log('Error al buscar dispositivos conectados: ' + error);\n        }\n      );\n\n    }, 1000);\n\n  }, []);\n\n  async function abrir(){\n\n    try {\n\n        if(BleClient.getConnectedDevices([]) === 0){\n        \n          window.location.href ='/Dispositivos';\n    \n        }else{\n    \n          BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n            async peripherals => {\n              console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n              for(let i = 0; i < peripherals.length; i++) {\n                console.log(peripherals[i].id);\n                await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([1]));\n              }\n            },\n            error => {\n              console.log('Error al buscar dispositivos conectados: ' + error);\n            }\n          );\n  \n        }\n  \n      } catch (error) {\n        console.error(error);\n      }\n\n  }\n\n  async function cerrar(){\n\n    try {\n\n        if(BleClient.getConnectedDevices([]) === 0){\n        \n          window.location.href ='/Dispositivos';\n    \n        }else{\n    \n          BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n            async peripherals => {\n              console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n              for(let i = 0; i < peripherals.length; i++) {\n                console.log(peripherals[i].id);\n                await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([2]));\n              }\n            },\n            error => {\n              console.log('Error al buscar dispositivos conectados: ' + error);\n            }\n          );\n  \n        }\n  \n      } catch (error) {\n        console.error(error);\n      }\n\n  }\n\n  async function parar(){\n\n    try {\n\n        if(BleClient.getConnectedDevices([]) === 0){\n        \n          window.location.href ='/Dispositivos';\n    \n        }else{\n    \n          BLE.connectedPeripheralsWithServices([HEART_RATE_SERVICE]).then(\n            async peripherals => {\n              console.log('Dispositivos conectados con el servicio ' + HEART_RATE_SERVICE + ':');\n              for(let i = 0; i < peripherals.length; i++) {\n                console.log(peripherals[i].id);\n                await BleClient.write(peripherals[i].id, HEART_RATE_SERVICE, WRITE_CHARACTERISTIC, numbersToDataView([3]));\n              }\n            },\n            error => {\n              console.log('Error al buscar dispositivos conectados: ' + error);\n            }\n          );\n  \n        }\n  \n      } catch (error) {\n        console.error(error);\n      }\n\n  }\n\n  function back(){\n    window.location.href ='/Menu';\n  }\n\n  return (\n    <IonPage>\n      <IonHeader className='fondo2'>\n        <IonToolbar className='fondo2'>\n            <ReactSVG src={headerControl} className='svg'></ReactSVG>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent fullscreen className='fondo2' scrollY=\"false\">\n\n            <ReactSVG src={abrirTodo} onClick={abrir} className='svg1'></ReactSVG>\n            <ReactSVG src={cerrarTodo} onClick={cerrar} className='svg1'></ReactSVG>\n\n            <ReactSVG src={barra} className='svg1'></ReactSVG>\n\n            <ReactSVG src={abrir1} onPointerDown={abrir} onPointerUp={parar} className='svg1'></ReactSVG>\n            <ReactSVG src={cerrar1} onPointerDown={cerrar} onPointerUp={parar} className='svg1'></ReactSVG>\n\n            <ReactSVG src={barra} className='svg1'></ReactSVG>\n\n            <ReactSVG src={Volver} className='imgAtras' onClick={back}></ReactSVG>\n\n      </IonContent>\n    </IonPage>\n  );\n\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}